# Base Definitions

This document defines common types and structures used across all design documents.

## Basic ID Types

All ID types are implementation-dependent (UUID). See Notes section for details.

```
PlayerID: unique identifier for a player
PlotID: unique identifier for a plot
BuildingID: unique identifier for a building
CultureID: unique identifier for a culture
ReligionID: unique identifier for a religion
ResourceTypeID: unique identifier for a resource type
SpeciesTypeID: unique identifier for a species type
TerrainTypeID: unique identifier for a terrain type
BuildingTypeID: unique identifier for a building type
```

Note: PopulationID removed as population is merely a civilized species (use SpeciesTypeID).

## Coordinate System

All coordinates use abstract world units. Map dimensions define the coordinate space (e.g., width=1000 means x ranges from 0 to 1000).

```
Point {
    x: float  // World coordinates
    y: float
}
```

## Calendar System

```
daysPerMonth: int = 30  // Configurable game calendar constant
```

## Religion System

```
Religion {
    id: ReligionID
    name: string
    relationships: []ReligionRelationship  // Relations with other religions
}

ReligionRelationship {
    targetReligion: ReligionID
    favorability: float         // Relationship level (-1.0 to 1.0, negative = hostile)
    tolerance: float            // Tolerance level (0.0 to 1.0)
}
```

## Culture System

```
Culture {
    id: CultureID
    name: string
    relationships: []CultureRelationship  // Relations with other cultures
}

CultureRelationship {
    targetCulture: CultureID
    favorability: float         // Relationship level (-1.0 to 1.0)
    affinity: float             // Cultural affinity (0.0 to 1.0)
}
```

## Consumable System

Resources and species populations can both be consumed (e.g., a species may eat resources or other species).
To unify this concept, we use a Consumable type:

```
ConsumableID: unique identifier for any consumable (resource or species population)
ConsumableType: RESOURCE, SPECIES_POPULATION

Consumable {
    id: ConsumableID
    type: ConsumableType
    resourceType: ResourceTypeID?    // Set if and only if type is RESOURCE
    speciesType: SpeciesTypeID?      // Set if and only if type is SPECIES_POPULATION
}
// Validation: Exactly one of resourceType or speciesType must be set based on type field

ConsumptionRule {
    consumer: SpeciesTypeID          // Species that consumes
    consumables: []ConsumableRef     // What can be consumed
    efficiency: float                // Food/sustenance conversion efficiency (0.0 to 1.0)
                                     // Represents how much nutrition/energy is gained from consumption
}

ConsumableRef {
    consumable: ConsumableID
    amountPerDay: float              // Amount consumed per capita per day
                                     // Units: abstract resource units for resources, individuals for species
                                     // Must match the unit system defined for the consumable type
}
```

## Species System

```
Species {
    id: SpeciesTypeID
    name: string
    isEnlightened: bool              // Whether species has sapience/civilization capability
    relationships: []SpeciesRelationship  // Relations with other species
    mergeable: []MergeRule           // Rules for species merging/hybridization
    foodSources: []ConsumptionRule   // What this species can eat
}

SpeciesRelationship {
    targetSpecies: SpeciesTypeID
    favorability: float              // Relationship level (-1.0 to 1.0)
    compatibility: float             // Biological/social compatibility (0.0 to 1.0)
}

MergeRule {
    species1: SpeciesTypeID
    species2: SpeciesTypeID
    resultSpecies: SpeciesTypeID     // New species from merging
    requiredConditions: []string     // Conditions needed for merge (e.g., "SAME_CULTURE", "HIGH_HAPPINESS")
}
```

## Resource System

```
ResourceType {
    id: ResourceTypeID
    name: string
    category: ResourceCategory  // RAW_MATERIAL, PROCESSED, ENERGY, ABSTRACT
    usable: bool               // Whether can be directly consumed/used
    buildingMaterial: bool     // Whether can be used in building construction
    energySource: bool         // Whether can be used as energy
    energyValue: float         // Energy output when used as fuel
    buildingEfficiency: float  // Efficiency as building material (0.0 to 1.0)
    consumptionEfficiency: float  // Efficiency when consumed (0.0 to 1.0)
    conversions: []ResourceConversion  // How this resource can be converted to others
}

ResourceConversion {
    outputResource: ResourceTypeID
    conversionRate: float      // Amount of output per unit input
    requiredBuilding: BuildingTypeID?  // Building needed for conversion (optional)
}

ResourceCategory: RAW_MATERIAL, PROCESSED, ENERGY, ABSTRACT
```

## Terrain System

```
TerrainType {
    id: TerrainTypeID
    name: string
    movementCost: float        // Movement cost multiplier
    defensiveBonus: float      // Combat defense bonus
    fertility: float           // Base fertility for food production (0.0 to 1.0)
    resourceYield: []ResourceYield  // Resources that can be extracted
    buildable: bool            // Whether buildings can be constructed
    navigable: bool            // Whether units can traverse (false for mountains, ocean depths)
}

ResourceYield {
    resourceType: ResourceTypeID
    baseYield: float           // Base yield per turn
    extractionDifficulty: float  // Difficulty modifier (0.0 to 1.0, higher = harder)
}
```

## Building System

```
BuildingType {
    id: BuildingTypeID
    name: string
    category: BuildingCategory
    constructionCost: []ResourceCost  // Resources needed to build
    maintenanceCost: []ResourceCost   // Resources needed per turn
    requiredTerrain: []TerrainTypeID  // Terrain types where it can be built
    workersRequired: int       // Number of population units needed to operate
    effects: []BuildingEffect  // Effects on plot/resources
}

BuildingCategory: ECONOMIC, MILITARY, CULTURAL, RELIGIOUS, INFRASTRUCTURE

ResourceCost {
    resourceType: ResourceTypeID
    amount: float
}

BuildingEffect {
    type: EffectType           // RESOURCE_PRODUCTION, RESOURCE_CAPACITY, DEFENSE, etc.
    targetResource: ResourceTypeID?  // Affected resource (if applicable)
    magnitude: float           // Effect strength
}

EffectType: RESOURCE_PRODUCTION, RESOURCE_CAPACITY, DEFENSE_BONUS, HAPPINESS_BONUS, 
            CULTURE_GENERATION, RESEARCH_BONUS, TRADE_BONUS
```

## Notes

- IDs use UUID format for all implementations
- Float values are typically 32-bit or 64-bit floating point numbers
- Arrays are denoted with [] prefix
- Optional/nullable types are denoted with ? suffix
- Favorability ranges: -1.0 (hostile) to 1.0 (friendly)
- Percentage ranges: 0.0 to 1.0 (representing 0% to 100%)
- Consumable validation: When type=RESOURCE, only resourceType should be set; when type=SPECIES_POPULATION, only speciesType should be set
