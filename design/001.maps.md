# Maps

See [000.definition.md](000.definition.md) for base type definitions.

## Overview

This document defines the base map structure and core types used in the map system.

## Core Map Types

```
Point {
    x: float  // World coordinates
    y: float
}

Edge {
    start: Point
    end: Point
    plot1: PlotID
    plot2: PlotID  // Adjacent plot
}

Neighbor {
    plotID: PlotID               // ID of the neighboring plot
    distance: float              // Distance between plot centers
    sharedBorderLength: float    // Length of the shared border edge
}

Plot {
    id: PlotID
    center: Point
    vertices: []Point
    neighbors: []Neighbor
    attributes: PlotAttributes
    area: float
    perimeter: float
}
```

## Plot Attributes

```
PlotAttributes {
    terrain: TerrainTypeID
    discoveredBy: []PlayerID  // Players who have discovered this plot
    altitude: float           // Meters above sea level (negative for ocean floor)
    temperature: float        // In Celsius
    humidity: float           // 0.0 to 1.0
    resources: []Resource
    fertility: float          // 0.0 to 1.0
    ownership: PlayerID
    buildings: []Building     // Buildings constructed on this plot
    populations: []Population // Population/species living on this plot
    culture: CultureID
}

Resource {
    type: ResourceTypeID
    abundance: float            // 0.0 to 1.0
    discoveredBy: []PlayerID    // Players who have discovered this resource
    currentQuantity: float      // Current available quantity
    quantityOnLine: float       // Quantity being extracted/produced
    dailyChange: float          // Daily change rate
    monthlyChange: float        // Monthly change rate
}
```

## Map Structure

```
Map {
    id: string
    config: MapConfig
    plots: map[PlotID]Plot
    plotCount: int
    createdAt: timestamp
}

MapConfig {
    plotCount: int
    dimensions: Dimensions  // width x height
    projection: ProjectionConfig
    terrain: TerrainConfig
    resourceDensity: float
    climateVariance: float
    randomSeed: int
    relaxationSteps: int  // Lloyd's relaxation iterations
}

Dimensions {
    width: float   // World units
    height: float  // World units
}

ProjectionConfig {
    wrapHorizontal: bool  // Connect left/right edges
    wrapVertical: bool    // Connect top/bottom edges
    poleScaling: float    // Size multiplier for polar regions (1.0 = no scaling)
}
// Projection types: flat (no wrap), cylindrical (horizontal wrap), spherical (both wrap)

TerrainConfig {
    oceanPercentage: float  // 0.0 to 1.0
    continentCount: int
    islandFrequency: float  // 0.0 to 1.0
    coastalRoughness: float // 0.0 to 1.0
}
```

## Discovery State

Players are added to discoveredBy arrays when they explore plots. State persists across game sessions.
